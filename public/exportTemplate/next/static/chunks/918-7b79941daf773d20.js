"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[918],{2483:function(e,t,l){var n=l(1844),i=l(6355),o=l.n(i),r=l(5784),d=l(632);let a=e=>{let{}=e,t=(0,d.ZP)(e=>e.text1),l=(0,d.ZP)(e=>e.text2),i=(0,d.ZP)(e=>e.text3),a=(0,d.ZP)(e=>e.variables),s=(0,d.ZP)(e=>e.configs),u=(0,d.ZP)(e=>e.activeGridId),p=(0,r.useMemo)(()=>{let e=[];for(let[t,l]of Object.entries(s))(null==l?void 0:l.isVisible)===!0&&e.push({variable:t,displayName:l.displayName});let t="";return e.forEach(e=>{var l,n,i;let{variable:o,displayName:r}=e,d=null!==(n=null===(l=o.match(/gridId(\d*)/))||void 0===l?void 0:l[1])&&void 0!==n?n:null,s=o;if(s=s.replace(/^gridId(\d*)/,""),null!==d&&d!=="".concat(u))return;let p=null!==(i=a[e.variable])&&void 0!==i?i:0,w=null!=r?r:s;t+="".concat(w,": ").concat(p,"\n")}),t},[a,s,u]);return(0,n.jsxs)(n.Fragment,{children:[(0,n.jsxs)("div",{className:"jsx-b8a41a65e357b7c container",children:[(0,n.jsx)("div",{className:"jsx-b8a41a65e357b7c text1",children:t}),(0,n.jsx)("div",{className:"jsx-b8a41a65e357b7c text2",children:l}),(0,n.jsx)("div",{className:"jsx-b8a41a65e357b7c text3",children:i}),(0,n.jsx)("div",{className:"jsx-b8a41a65e357b7c inventory",children:p})]}),(0,n.jsx)(o(),{id:"b8a41a65e357b7c",children:".container.jsx-b8a41a65e357b7c{}"})]})};t.Z=a},632:function(e,t,l){l.d(t,{ZP:function(){return P},Mq:function(){return y},g3:function(){return _},qR:function(){return S}});var n=l(4671),i=l(6562);let o={},r={get(e,t){let l=window._s.getState().variables,n=l[t];return void 0===n?0:n},set(e,t,l){var n;let{variables:i,subscribers:o}=window._s.getState(),r={...i,[t]:l};window._s.setState({variables:r});let d=null!==(n=null==o?void 0:o[t])&&void 0!==n?n:[];return console.log("subscribersForVariable | proxy.ts l28",d),d.forEach(e=>e(l)),!0}},d=new Proxy(o,r),a={},s={get(e,t){var l;let n=window._s.getState().subs;return null!==(l=null==n?void 0:n[t])&&void 0!==l?l:[]},set(e,t,l){var n;let i=window._s.getState().subscribers;console.log("unparsedCallback | proxy.ts l64",l);let o=null!==(n=null==i?void 0:i[t])&&void 0!==n?n:[];o.push(l),console.log("subscribersForVariable | proxy.ts l71",o);let r={...i,[t]:o};return window._s.setState({subscribers:r}),!0}},u=new Proxy(a,s),p={},w={get(e,t){var l;let n=window._s.getState().configs;return null!==(l=null==n?void 0:n[t])&&void 0!==l?l:{}},set(e,t,l){let n=window._s.getState().configs,i={...n,[t]:{...n[t],...l}};return window._s.setState({configs:i}),!0}},f=new Proxy(p,w),x={},h={get(e,t){var l,n,i,o;let r=t.split("_")[0],d=parseInt(null!==(i=null===(l=t.match(/gridId(\d*)/))||void 0===l?void 0:l[1])&&void 0!==i?i:""),a=parseInt(null!==(o=null===(n=t.match(/cellIndex(\d*)/))||void 0===n?void 0:n[1])&&void 0!==o?o:""),s=window._s.getState().getCell({gridId:d,cellIndex:a});return s[r]},set(e,t,l){var n,i,o,r;let d=t.split("_")[0],a=parseInt(null!==(o=null===(n=t.match(/gridId(\d*)/))||void 0===n?void 0:n[1])&&void 0!==o?o:""),s=parseInt(null!==(r=null===(i=t.match(/cellIndex(\d*)/))||void 0===i?void 0:i[1])&&void 0!==r?r:"");return window._s.getState().updateCell({gridId:a,cellIndex:s,cellUpdate:{[d]:l}}),!0}},b=new Proxy(x,h),C=()=>({color:"",emoji:"",onClickCScript:"",onViewCScript:"",onInitCScript:""}),I=()=>({text:"",cells:Array(100).fill({}).map(C),onViewGScript:"",onInitGScript:""}),m=()=>({activeGridId:0,selectedTool:"",isToolCursorVisible:!1,selectedColor:null,selectedEmoji:null,mouseDownCellIndex:null,lastEmojis:[],copiedCell:C(),grids:[{id:0,...I()}],firstGridId:0,onInitAScript:"",adventure:null,isChanged:!1,activeCScriptTab:"onClickCScript",isInitFinished:!1,text1:"",text2:"",text3:"",variables:{},subscribers:{},configs:{}}),_=[],S=e=>{_.push(JSON.parse(JSON.stringify({activeGridId:e.activeGridId,grids:e.grids}))),_.length>20&&_.shift()},y=()=>_=[],j=(0,n.Z)((e,t)=>({set:l=>{e(l),e({isChanged:!0}),t()},reset:()=>e(m()),...m(),undo:()=>{if(_.length>1){_.pop();let e=_[_.length-1];t().set(e)}},getCell(e){var l,n;let{gridId:i,cellIndex:o}=e,{grids:r}=t(),d=r.find(e=>e.id===i);return void 0===d?null:null!==(n=null===(l=d.cells)||void 0===l?void 0:l[o])&&void 0!==n?n:null},updateCell(e){let{gridId:l,cellIndex:n,cellUpdate:i}=e,{grids:o}=t(),r=o.find(e=>e.id===l);return void 0===r?console.error("grid ".concat(l," not found in the store")):n>=100?console.error("cellIndex ".concat(n," does not exist (must be 0-100)")):void(r.cells[n]={...r.cells[n],...i},t().set({grids:[...o]}),S(t()))},updateCellWithAppend(e){let{gridId:l,cellIndex:n,cellUpdate:i}=e,{grids:o}=t(),r=o.find(e=>e.id===l);if(void 0===r)return console.error("grid ".concat(l," not found in the store"));if(n>=100)return console.error("cellIndex ".concat(n," does not exist (must be 0-100)"));let d={...r.cells[n]};void 0!==i.emoji&&(d.emoji+=i.emoji),void 0!==i.onClickCScript&&(d.onClickCScript+=(""===d.onClickCScript?"":"\n")+i.onClickCScript),void 0!==i.onViewCScript&&(d.onViewCScript+=(""===d.onViewCScript?"":"\n")+i.onViewCScript),void 0!==i.onInitCScript&&(d.onInitCScript+=(""===d.onInitCScript?"":"\n")+i.onInitCScript),r.cells[n]={...r.cells[n],...d},t().set({grids:[...o]}),S(t())},updateSquare:e=>{let{gridId:l,cellIndex1:n,cellIndex2:o,cellUpdate:r}=e,{grids:d}=t(),a=d.find(e=>e.id===l);if(void 0===a)return console.error("grid ".concat(l," not found in the store"));if(n>=100||n<0)return console.error("cellIndex ".concat(n," does not exist (must be 0-100)"));if(o>=100||o<0)return console.error("cellIndex ".concat(o," does not exist (must be 0-100)"));let s=10,u=10,p=(0,i.HW)(n,o,s,u);p.forEach(e=>{a.cells[e]={...a.cells[e],...r}}),t().set({grids:[...d]}),S(t())},floodFill:e=>{let{gridId:l,cellIndex:n,cellUpdate:o}=e,{grids:r}=t(),d=r.find(e=>e.id===l);if(void 0===d)return console.error("grid ".concat(l," not found in the store"));if(n>=100||n<0)return console.error("cellIndex ".concat(n," does not exist (must be 0-100)"));let a=[],s=(null==o?void 0:o.color)!==void 0;s&&(a=(0,i.fK)(n,d.cells.map(e=>e.color)));let u=(null==o?void 0:o.emoji)!==void 0;u&&(a=(0,i.fK)(n,d.cells.map(e=>e.emoji))),a.forEach(e=>{d.cells[e]={...d.cells[e],...o}}),t().set({grids:[...r]}),S(t())},pickEmoji:l=>{let n=t().selectedTool;"pencil"!==n&&"square"!==n&&e({selectedTool:"pencil"}),e({selectedEmoji:l,selectedColor:null});let i=t().lastEmojis;if(!i.includes(l)){let t=[l,...i];t.length>20&&(t.length=20),e({lastEmojis:t})}},updateGrid:e=>{let{gridId:l,gridUpdate:n}=e,{grids:i}=t(),o=i.findIndex(e=>e.id===l);if(-1===o)return console.error("grid ".concat(l," not found in the store"));i[o]={...i[o],...n},t().set({grids:[...i]}),S(t())},createGrid:e=>{let{name:l,idOfGridToCopy:n}=e,{grids:i}=t(),o=Math.max(...i.map(e=>e.id))+1,r={};if(void 0!==n){let e=i.find(e=>e.id===n);if(void 0===e)return;r={...e,cells:e.cells.map(e=>({...e,onClickCScript:"",onViewCScript:"",onInitCScript:""}))}}let d={...I(),...void 0!==n?r:{},...void 0!==l?{text:l}:{},id:o},a=[...i,d];return t().set({grids:a}),S(t()),d},deleteGrid:e=>{let{grids:l,activeGridId:n,firstGridId:i}=t();if(l.length<=1)return;let o=e===n,r=e===i,d=l.filter(t=>t.id!==e);t().set({activeGridId:o?d[d.length-1].id:n}),t().set({firstGridId:r?d[d.length-1].id:i}),t().set({grids:d}),S(t())}}));var P=j;window._h=_,window._s=j,window._ss=()=>j.getState(),window._g={},window._variableProxy=d,window._subscriberProxy=u,window._configProxy=f,window._updateProxy=b},4399:function(__unused_webpack_module,__webpack_exports__,__webpack_require__){__webpack_require__.d(__webpack_exports__,{M:function(){return getRegexes},g:function(){return evalScript}});let getRegexes=(e,t)=>[["$#.","window._subscriberProxy.","Add a subscriber to a global (adventure) variable. (e.g. $#.score = v => console.log(`score: ${v}`))"],["%#.","window._configProxy.","Config global (adventure) variable (such for displaying or display name)"],["#.","window._variableProxy.","Global (adventure) variable"],["$@.","window._subscriberProxy.".concat(null===e?"":"gridId".concat(e)),"Add a subscriber to a grid variable. (e.g. $@.count = v => v > 10 && #m(2))"],["%@.","window._configProxy.".concat(null===e?"":"gridId".concat(e)),"Config grid variable (use only in a Grid or Cell)"],["@.","window._variableProxy.".concat(null===e?"":"gridId".concat(e)),"Grid variable (use only in a Grid or Cell)"],["$^.","window._subscriberProxy.".concat(null===e?"":"gridId".concat(e)).concat(null===t?"":"cellIndex".concat(t)),"Add a subscriber to a cell variable. (e.g. $^.life = v => v <= 0 && ^d)"],["%^.","window._configProxy.".concat(null===e?"":"gridId".concat(e)).concat(null===t?"":"cellIndex".concat(t)),"Config cell variable (use only in a Cell)"],["^.","window._variableProxy.".concat(null===e?"":"gridId".concat(e)).concat(null===t?"":"cellIndex".concat(t)),"Cell variable (use only in a Cell)"],["@gi","".concat(e),"Get gridId (in a Grid or Cell)"],["^ci","".concat(t),"Get cellId (in a Cell)"],["^cs","window._updateProxy.onClickCScript_".concat(null===e?"":"gridId".concat(e)).concat(null===t?"":"cellIndex".concat(t)),"Update click script of the cell"],["^vs","window._updateProxy.onViewCScript_".concat(null===e?"":"gridId".concat(e)).concat(null===t?"":"cellIndex".concat(t)),"Update view script of the cell"],["^c","window._updateProxy.color_".concat(null===e?"":"gridId".concat(e)).concat(null===t?"":"cellIndex".concat(t)),"Update color of the cell"],["^e","window._updateProxy.emoji_".concat(null===e?"":"gridId".concat(e)).concat(null===t?"":"cellIndex".concat(t)),"Update emoji/character of the cell"],["^dcs","window._ss().updateCell({ gridId: ".concat(null!=e?e:"0",", cellIndex: ").concat(null!=t?t:"0",', cellUpdate: { onClickCScript: "" }})'),"Delete click script of the cell (no () needed)"],["^dvs","window._ss().updateCell({ gridId: ".concat(null!=e?e:"0",", cellIndex: ").concat(null!=t?t:"0",', cellUpdate: { onViewCScript: "" }})'),"Delete view script of the cell"],["^dc","window._ss().updateCell({ gridId: ".concat(null!=e?e:"0",", cellIndex: ").concat(null!=t?t:"0",', cellUpdate: { color: "" }})'),"Delete color of the cell"],["^de","window._ss().updateCell({ gridId: ".concat(null!=e?e:"0",", cellIndex: ").concat(null!=t?t:"0",', cellUpdate: { emoji: "" }})'),"Delete emoji of the cell"],["^dd","window._ss().updateCell({ gridId: ".concat(null!=e?e:"0",", cellIndex: ").concat(null!=t?t:"0",', cellUpdate: { emoji: "", color: "", onClickCScript: "", onViewScript: "" }})'),"Delete emoji, click script and view script of the cell (equivalent to ^e = '', ^c = '', ^cs = '' and ^vs = '')"],["^d","window._ss().updateCell({ gridId: ".concat(null!=e?e:"0",", cellIndex: ").concat(null!=t?t:"0",', cellUpdate: { emoji: "", onClickCScript: "", onViewScript: "" }})'),"Delete emoji, click script and view script of the cell (equivalent to ^e = '', ^cs = '' and ^vs = '')"],[/\#tt\((.*?)\)/g,"window._s.setState({ text2: $1 })","Display text under the grid (second position)","#tt($1)"],[/\#t\((.*?)\)/g,"window._s.setState({ text1: $1 })","Display text under the grid","#t($1)"],[/\#\((.*?)\)/g,"window._s.setState({ text1: `$1` })","Display text under the grid (no quotes needed)","#($1)"],["#g(","window._s.getState(","Get the state of the Zustand store (all data used by the adventure)"],["#s(","window._s.setState(","Set the state of the Zustand store (you can reactively change everything)"],["#u(","window._ss().updateCell(","Update cell (you have to provide gridId, cellId, and the update object)"],[/\#\#a\((.*?)\)/g,"setTimeout(() => { window.alert($1) }, 10)","Display alert dialog, delayed after the grid is visually loaded","##a($1)"],["#a(","window.alert(","Display alert dialog (compatible with variables and string interpolation)"],["#p(","window.prompt(","Display prompt dialog"],["#c(","window.confirm(","Display confirm dialog"],[/\#m\((.*?)\)/g,"window._s.setState({ activeGridId: $1 })","Move to specified gridId","#m($1)"]],evalScript=function(script){let{gridId,cellIndex}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(""===script)return;let regexes=getRegexes(gridId,cellIndex),newScript=script;regexes.forEach(e=>{newScript=newScript.replaceAll(e[0],e[1])}),eval(newScript)}},6562:function(e,t,l){l.d(t,{HW:function(){return n},VD:function(){return i},fK:function(){return w},h9:function(){return r},qL:function(){return o}});let n=(e,t,l,n)=>{let i=[],o=Math.floor(e/l),r=Math.floor(t/l),d=e%l,a=t%l,s=Math.min(o,r),u=Math.max(o,r),p=Math.min(d,a),w=Math.max(d,a);for(let e=s;e<=u;e++)for(let t=p;t<=w;t++)i.push(t+e*l);return i},i=(e,t)=>{let{line:l,column:n}=r(e),i=l,o=t+1-n;return d({line:i,column:o})},o=(e,t)=>{let{line:l,column:n}=r(e),i=t+1-l,o=n;return d({line:i,column:o})},r=e=>({line:Math.floor(e/10)+1,column:e%10+1}),d=e=>{let{line:t,column:l}=e;return(t-1)*10+(l-1)},a=e=>{let{line:t,column:l}=r(e);return 1===t?null:d({line:t-1,column:l})},s=e=>{let{line:t,column:l}=r(e);return 10===t?null:d({line:t+1,column:l})},u=e=>{let{line:t,column:l}=r(e);return 1===l?null:d({line:t,column:l-1})},p=e=>{let{line:t,column:l}=r(e);return 10===l?null:d({line:t,column:l+1})},w=(e,t)=>{let l=t[e],n=[],i=[],o=e=>{if(i.includes(e))return;i.push(e);let r=t[e];if(r!==l)return;n.push(e);let d=a(e);null!==d&&o(d);let w=s(e);null!==w&&o(w);let f=p(e);null!==f&&o(f);let x=u(e);null!==x&&o(x)};return o(e),n}}}]);